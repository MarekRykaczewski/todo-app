(()=>{let e=0;class t{constructor(t,d){this.id=e++,this.title=t,this.todos=d}addToList(e,t,o,s){let n=new d(e,t,o,s);this.todos.push(n)}removeFromList(e){this.todos.splice(e,1)}}class d{constructor(e,t,d,o){this.id=i.todos.length,this.title=e,this.description=t,this.dueDate=d,this.priority=o}}let o=new class{constructor(e){this.lists=[]}addList(e){let d=new t(e,[]);this.lists.push(d)}},s=new class{createTodo(e,t){const d=document.getElementById("display-items"),o=document.createElement("div"),s=document.createElement("p"),n=document.createTextNode(e.todos.at(t).title),a=document.createElement("button"),l=document.createElement("button");o.className="todo-item",l.dataset.indexNum=e.todos.at(t).id,a.className="submit-button",s.append(n),l.className="delete-button",l.onclick=function(){let t=parseInt(l.dataset.indexNum);const d=e.todos.find((e=>e.id===t));e.removeFromList(d),l.parentNode.parentNode.removeChild(l.parentNode)},o.append(a),o.append(s),o.append(l),d.append(o);let c=parseInt(l.dataset.indexNum),r=i.todos.filter((e=>e.id===c));console.log(Object.values(r)[0]);let u=Object.values(r)[0],m=document.createElement("div");m.setAttribute("id","details-container");let p=document.createElement("span"),h=document.createTextNode("Priority: "+i.todos[u.id].priority);p.appendChild(h),m.appendChild(p);let y=document.createElement("span"),x=document.createTextNode("Date: "+i.todos[u.id].dueDate);y.appendChild(x),m.appendChild(y),o.appendChild(m),m.style.display="none",o.onclick=function(){o.classList.contains("todo-expanded")?(this.classList.remove("todo-expanded"),m.style.display="none"):(this.classList.add("todo-expanded"),m.style.display="flex")}}createList(e){let t=this;const d=document.getElementById("display-items"),s=document.getElementById("sidebar"),n=document.createElement("div"),a=document.createTextNode(e);n.className="userlist",n.dataset.indexNum=o.lists.at(-1).id,n.append(a),s.append(n),n.addEventListener("click",(function(){document.querySelector("#display-header").innerHTML=e;let s=parseInt(n.dataset.indexNum);for(i=o.lists.find((e=>e.id===s));d.firstChild;)d.removeChild(d.lastChild);t.refreshTodos(i)}))}refreshTodos(e){for(let t=0;t<e.todos.length;t++)this.createTodo(e,t)}},n="Home";o.addList(n),s.createList(n);let i=o.lists[0];const a=document.querySelector("#new-todo-button"),l=document.querySelector("#new-task-input"),c=document.querySelector("#new-task-priority"),r=document.querySelector("#new-task-date");a.onclick=function(){title=l.value,priority=c.value,date=r.value,i.addToList(title,"",date,priority),s.createTodo(i,-1)};const u=document.querySelector("#new-list-button"),m=document.querySelector("#new-list-input");u.onclick=function(){text=m.value,o.addList(text),s.createList(text)}})();